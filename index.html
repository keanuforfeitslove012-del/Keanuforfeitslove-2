<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To My Valentine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Quicksand:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        /* Custom Animations & 3D Effects */
        body {
            font-family: 'Quicksand', sans-serif;
            overflow: hidden; /* Prevent scrolling, full screen experience */
        }

        .font-handwriting {
            font-family: 'Dancing Script', cursive;
        }

        /* Building Container */
        .building-container {
            perspective: 1000px;
            transform-style: preserve-3d;
        }

        /* The Building */
        .building {
            transform-style: preserve-3d;
            transition: transform 1s ease;
        }

        /* Window Styles */
        .window-frame {
            position: relative;
            width: 100%;
            height: 100%;
            background: #2d3748;
            border: 4px solid #4a5568;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
            overflow: hidden;
            border-radius: 4px;
            cursor: pointer;
            transition: box-shadow 0.3s;
        }

        .window-frame:hover {
            box-shadow: inset 0 0 10px rgba(255, 215, 0, 0.3);
        }

        /* Shutters */
        .shutter {
            position: absolute;
            top: 0;
            width: 50%;
            height: 100%;
            background: #8B4513; /* Wood color */
            border: 1px solid #5D4037;
            transition: transform 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .shutter::after {
            content: '';
            width: 4px;
            height: 40%;
            background: #3e2723;
            border-radius: 2px;
        }

        .shutter.left {
            left: 0;
            transform-origin: left;
        }

        .shutter.right {
            right: 0;
            transform-origin: right;
        }

        /* Open State */
        .window-frame.open .shutter.left {
            transform: rotateY(-100deg);
        }

        .window-frame.open .shutter.right {
            transform: rotateY(100deg);
        }

        /* Window Content */
        .window-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.5s ease 0.4s; /* Delay fade in until shutters open */
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            text-align: center;
            z-index: 10;
        }

        .window-frame.open .window-content {
            opacity: 1;
        }

        /* Floating Animation for Content */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        .floating {
            animation: float 3s ease-in-out infinite;
        }

        /* Clouds */
        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50px;
            animation: drift linear infinite;
            z-index: -1;
        }
        @keyframes drift {
            from { transform: translateX(-100%); }
            to { transform: translateX(100vw); }
        }

        /* Balloons */
        .balloon {
            position: absolute;
            width: 60px;
            height: 75px;
            border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
            cursor: crosshair;
            box-shadow: inset -5px -5px 10px rgba(0,0,0,0.1);
            animation: sway 3s ease-in-out infinite alternate;
            z-index: 50;
            transition: transform 0.1s;
        }
        .balloon::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            width: 2px;
            height: 20px;
            background: rgba(255,255,255,0.6);
            transform: translateX(-50%);
        }
        @keyframes sway {
            from { transform: rotate(-5deg) translateY(0); }
            to { transform: rotate(5deg) translateY(-10px); }
        }
        .balloon.pop {
            animation: popAnim 0.2s forwards;
        }
        @keyframes popAnim {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.4); opacity: 0.8; }
            100% { transform: scale(0); opacity: 0; }
        }

        /* Confetti */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall linear forwards;
        }
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

        /* Helicopter */
        .helicopter-container {
            position: absolute;
            top: 20%;
            left: -300px;
            width: 200px;
            height: 100px;
            z-index: 100;
            display: none; /* Hidden initially */
            filter: drop-shadow(0 10px 10px rgba(0,0,0,0.3));
        }

        .helicopter-body {
            width: 120px;
            height: 50px;
            background: #e53e3e;
            border-radius: 20px 40px 10px 10px;
            position: relative;
            top: 25px;
            left: 40px;
        }
        
        .cockpit {
            position: absolute;
            right: 10px;
            top: 5px;
            width: 30px;
            height: 30px;
            background: #bee3f8;
            border-radius: 50%;
            border: 2px solid #c53030;
        }

        .tail {
            position: absolute;
            left: -40px;
            top: 35px;
            width: 50px;
            height: 10px;
            background: #e53e3e;
            transform: rotate(-10deg);
        }
        .tail-fin {
            position: absolute;
            left: -40px;
            top: 15px;
            width: 15px;
            height: 40px;
            background: #c53030;
            clip-path: polygon(0 0, 100% 100%, 100% 0);
        }

        .main-rotor {
            position: absolute;
            top: 10px;
            left: 40px;
            width: 140px;
            height: 10px;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            animation: spin 0.1s linear infinite;
            transform-origin: center;
        }

        .tail-rotor {
            position: absolute;
            left: -35px;
            top: 10px;
            width: 20px;
            height: 20px;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            animation: spin 0.05s linear infinite;
        }

        @keyframes spin {
            from { transform: rotateX(0deg); }
            to { transform: rotateX(360deg); }
        }

        .banner {
            position: absolute;
            top: 80px;
            left: 60px;
            width: 300px;
            height: 60px;
            background: #fff;
            border: 2px solid #e53e3e;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Dancing Script', cursive;
            font-size: 1.5rem;
            color: #e53e3e;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform-origin: top center;
            animation: bannerSway 2s ease-in-out infinite alternate;
        }
        
        .banner::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 10px;
            width: 2px;
            height: 20px;
            background: #333;
        }
        .banner::after {
            content: '';
            position: absolute;
            top: -20px;
            right: 10px;
            width: 2px;
            height: 20px;
            background: #333;
        }

        @keyframes bannerSway {
            from { transform: rotate(-2deg); }
            to { transform: rotate(2deg); }
        }

        @keyframes flyAcross {
            0% { left: -400px; }
            100% { left: 110%; }
        }

        .fly-animation {
            display: block;
            animation: flyAcross 10s linear forwards;
        }
        
        /* Mobile Responsiveness */
        @media (max-width: 640px) {
            .building { width: 90vw !important; }
            .window-content { font-size: 0.8rem; }
            .banner { width: 200px; font-size: 1rem; height: 40px; }
        }
    </style>
</head>
<body class="bg-gradient-to-b from-blue-300 via-blue-200 to-pink-100 h-screen w-screen flex flex-col items-center justify-center relative">

    <!-- Background Elements -->
    <div id="sky-container" class="absolute inset-0 overflow-hidden pointer-events-none">
        <!-- Clouds generated by JS -->
    </div>

    <!-- Intro Overlay -->
    <div id="intro" class="absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm transition-opacity duration-1000">
        <div class="bg-white p-8 rounded-2xl shadow-2xl text-center max-w-md mx-4 transform hover:scale-105 transition-transform">
            <h1 class="text-4xl font-handwriting text-pink-600 mb-4">Happy Valentine's Day</h1>
            <p class="text-gray-600 mb-6">I built something special for you. Tap to enter.</p>
            <button onclick="startExperience()" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all transform hover:-translate-y-1">
                Open Your Gift ‚ù§Ô∏è
            </button>
        </div>
    </div>

    <!-- Main Scene -->
    <div class="relative z-10 flex flex-col items-center w-full max-w-2xl h-full justify-end pb-10">
        
        <!-- Balloon Area (Roof) -->
        <div id="roof" class="relative w-64 h-32 mb-[-10px] z-20 flex justify-center items-end">
            <div class="absolute bottom-0 w-full h-4 bg-gray-700 rounded-t-lg"></div>
            <!-- Balloons will be appended here -->
        </div>

        <!-- The Building -->
        <div class="building w-80 sm:w-96 bg-gradient-to-b from-red-100 to-red-50 border-x-8 border-b-8 border-red-200 shadow-2xl flex flex-col relative">
            
            <!-- Floor 3 -->
            <div class="h-48 border-b-4 border-red-200 p-6 flex items-center justify-center relative group">
                <div class="window-frame w-48 h-32" onclick="toggleWindow(this, 3)">
                    <div class="shutter left"></div>
                    <div class="shutter right"></div>
                    <div class="window-content bg-blue-50">
                        <div class="text-3xl mb-2">üéàüéàüéà</div>
                        <p class="text-gray-700 font-medium text-sm px-2">
                            Pop all the balloons on the roof to reveal your final surprise!
                        </p>
                    </div>
                </div>
                <div class="absolute bottom-2 text-red-300 font-handwriting text-xl opacity-50">Floor 3</div>
            </div>

            <!-- Floor 2 -->
            <div class="h-48 border-b-4 border-red-200 p-6 flex items-center justify-center relative">
                <div class="window-frame w-48 h-32" onclick="toggleWindow(this, 2)">
                    <div class="shutter left"></div>
                    <div class="shutter right"></div>
                    <div class="window-content bg-pink-50 overflow-y-auto">
                        <h3 class="font-handwriting text-2xl text-pink-600 mb-2">My Dearest</h3>
                        <p class="text-gray-600 text-xs leading-relaxed">
                            Every moment with you feels like a beautiful dream I never want to wake up from. 
                            Your smile is the first thing I think of in the morning and the last thing on my mind at night. 
                            You are my rock, my joy, and my greatest adventure. I am so lucky to have you in my life.
                        </p>
                    </div>
                </div>
                <div class="absolute bottom-2 text-red-300 font-handwriting text-xl opacity-50">Floor 2</div>
            </div>

            <!-- Floor 1 -->
            <div class="h-48 p-6 flex items-center justify-center relative">
                <div class="window-frame w-48 h-32" onclick="toggleWindow(this, 1)">
                    <div class="shutter left"></div>
                    <div class="shutter right"></div>
                    <div class="window-content bg-yellow-50">
                        <div class="floating text-4xl mb-2">üïäÔ∏è</div>
                        <p class="text-gray-700 font-bold text-sm mb-1">Thanks for being in my life</p>
                        <p class="text-gray-500 text-xs">You make everything brighter.</p>
                    </div>
                </div>
                <div class="absolute bottom-2 text-red-300 font-handwriting text-xl opacity-50">Floor 1</div>
            </div>

            <!-- Door -->
            <div class="absolute -bottom-16 left-1/2 transform -translate-x-1/2 w-24 h-24 bg-red-900 rounded-t-full border-4 border-yellow-700 flex items-center justify-center shadow-lg z-30">
                <div class="w-2 h-2 bg-yellow-500 rounded-full absolute right-4 top-12 shadow-md"></div>
                <div class="text-red-800 font-serif text-xs mt-8 opacity-50">Home</div>
            </div>
        </div>
        
        <!-- Ground -->
        <div class="w-full h-16 bg-green-400 mt-16 rounded-t-[50%] scale-150 border-t-4 border-green-300 shadow-inner"></div>
    </div>

    <!-- Helicopter -->
    <div id="helicopter" class="helicopter-container">
        <div class="tail"></div>
        <div class="tail-fin"></div>
        <div class="helicopter-body">
            <div class="cockpit"></div>
        </div>
        <div class="main-rotor"></div>
        <div class="tail-rotor"></div>
        <div class="banner">Thanks for visiting! From Keanu</div>
    </div>

    <script>
        // --- Setup & Initialization ---
        
        function startExperience() {
            document.getElementById('intro').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('intro').style.display = 'none';
                spawnBalloons();
                createClouds();
            }, 1000);
        }

        // --- Window Logic ---
        function toggleWindow(element, floor) {
            // Close others (optional, but cleaner)
            document.querySelectorAll('.window-frame').forEach(w => {
                if (w !== element) w.classList.remove('open');
            });
            
            element.classList.toggle('open');
        }

        // --- Cloud Generation ---
        function createClouds() {
            const container = document.getElementById('sky-container');
            for (let i = 0; i < 5; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                const size = Math.random() * 100 + 60;
                cloud.style.width = `${size}px`;
                cloud.style.height = `${size * 0.6}px`;
                cloud.style.top = `${Math.random() * 40}%`;
                cloud.style.animationDuration = `${Math.random() * 20 + 20}s`;
                cloud.style.animationDelay = `-${Math.random() * 20}s`;
                container.appendChild(cloud);
            }
        }

        // --- Balloon Game Logic ---
        let balloonsPopped = 0;
        const totalBalloons = 8;
        let gameActive = true;

        function spawnBalloons() {
            const roof = document.getElementById('roof');
            const colors = ['bg-red-400', 'bg-pink-400', 'bg-purple-400', 'bg-blue-400', 'bg-yellow-400'];
            
            for (let i = 0; i < totalBalloons; i++) {
                const balloon = document.createElement('div');
                balloon.className = `balloon ${colors[Math.floor(Math.random() * colors.length)]}`;
                
                // Random positioning on roof
                const leftPos = 20 + (i * (60 / totalBalloons)) + (Math.random() * 10);
                balloon.style.left = `${leftPos}%`;
                balloon.style.bottom = `${Math.random() * 20}px`;
                balloon.style.animationDelay = `${Math.random() * 2}s`;
                
                // Interaction
                balloon.onmousedown = (e) => popBalloon(e, balloon);
                balloon.ontouchstart = (e) => popBalloon(e, balloon); // Mobile support
                
                roof.appendChild(balloon);
            }
        }

        function popBalloon(e, element) {
            if (!gameActive || element.classList.contains('pop')) return;
            
            // Prevent default touch actions
            if(e.type === 'touchstart') e.preventDefault();

            element.classList.add('pop');
            createConfetti(e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY);
            
            balloonsPopped++;

            if (balloonsPopped === totalBalloons) {
                triggerWin();
            }
        }

        function createConfetti(x, y) {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff'];
            for (let i = 0; i < 20; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${x}px`;
                confetti.style.top = `${y}px`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                // Random trajectory
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 100 + 50;
                const tx = Math.cos(angle) * velocity;
                const ty = Math.sin(angle) * velocity + 200; // Fall down
                
                confetti.animate([
                    { transform: `translate(0,0) rotate(0deg)`, opacity: 1 },
                    { transform: `translate(${tx}px, ${ty}px) rotate(${Math.random()*360}deg)`, opacity: 0 }
                ], {
                    duration: 1000,
                    easing: 'cubic-bezier(0.25, 1, 0.5, 1)',
                    fill: 'forwards'
                });
                
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 1000);
            }
        }

        // --- Helicopter Finale ---
        function triggerWin() {
            gameActive = false;
            
            // Small delay before helicopter arrives
            setTimeout(() => {
                const heli = document.getElementById('helicopter');
                heli.style.display = 'block';
                heli.classList.add('fly-animation');
                
                // Reset after first pass to do it twice
                heli.addEventListener('animationend', () => {
                    heli.classList.remove('fly-animation');
                    heli.style.display = 'none';
                    
                    // Second pass
                    setTimeout(() => {
                        heli.style.display = 'block';
                        // Force reflow
                        void heli.offsetWidth; 
                        heli.classList.add('fly-animation');
                    }, 500);
                });
            }, 50
